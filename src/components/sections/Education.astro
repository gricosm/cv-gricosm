---
import { education } from "@cv";
import Section from "@/components/Section.astro";

const formatDate = (dateInput: string): string => {
  const date = new Date(dateInput);
  const month = date.getMonth() + 1;
  const year = date.getFullYear();

  const formattedOutputMonth = month < 10 ? `0${month}` : month.toString();

  return `${formattedOutputMonth} / ${year}`;
};
---

<Section title="EducaciÃ³n">
  <ul>
    {
      education.map(
        ({ institution, url, startDate, endDate, area, studyType }) => {
          return (
            <li>
              <article>
                <header>
                  <>
                    <div>
                      <a
                        href={url}
                        title={`Web de ${institution}`}
                        target="_blank"
                        rel="noopener noreferrer"
                      >
                        {institution}
                      </a>
                      <h4>
                        {studyType} {area}
                      </h4>
                    </div>
                    <time>
                      <h4>
                        {formatDate(startDate)} -
                        {endDate !== null ? formatDate(endDate) : "Actualidad"}
                      </h4>
                    </time>
                  </>
                </header>
              </article>
            </li>
          );
        },
      )
    }
  </ul>
</Section>

<style>
  ul {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  article h3 {
    color: #222;
    font-weight: 500;
  }

  article h4 {
    color: #3b3b3c;
    font-weight: 400;
  }

  header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    margin-bottom: 0.5rem;
  }

  time {
    color: #3b3b3c;
    font-size: 0.85rem;
  }
</style>
